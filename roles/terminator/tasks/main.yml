- name: Install terminator
  package: name=terminator state=present
  become_method: sudo
  become: yes

- name: Install font
  get_url: 
    url: https://raw.githubusercontent.com/ryanoasis/nerd-fonts/master/patched-fonts/FiraCode/Medium/complete/Fura%20Code%20Medium%20Nerd%20Font%20Complete%20Mono.ttf
    mode: 0644
    owner: root
    group: root
    dest: /usr/local/share/fonts
  become: yes

- name: Check if font already cached
  shell: fc-list ":family=FuraCode Nerd Font Mono"
  register: fc_list
  changed_when: no

- name: Refresh font cache
  shell: fc-cache -f -v
  when: "'FuraCode Nerd Font Mono' not in fc_list.stdout"

- block:
  - name: Make sure path exists
    file:
      dest: "{{ conf_path }}"
      state: directory
  - name: Link terminator config
    file:
      src: "{{ dotfiles_home }}/roles/terminator/files/config"
      dest: "{{ conf_path }}/config"
      state: link
  vars:
    conf_path: "{{ ansible_env.HOME }}/.config/terminator"


- name: Add terminator to Gnome Favorites (Dock)
  gnome_favorites.py:
    app: 'terminator.desktop'
